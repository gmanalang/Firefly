{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import React,{useState,useRef,useEffect}from\"react\";import{getDownloadURL,listAll,ref,uploadBytes,deleteObject,getStorage}from\"firebase/storage\";import{storage}from\"./firebase/firebase.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentSession=_useState2[0],setCurrentSession=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),imageUpload=_useState4[0],setImageHolder=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),imageList=_useState6[0],setImageList=_useState6[1];var imageListRef=ref(storage,\"sessions/\".concat(currentSession));var sessionListRef=ref(storage,\"sessions/\");var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),setImageRef=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),setImageUrls=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),refresh=_useState12[0],setRefresh=_useState12[1];function refreshFiles(){setRefresh(!refresh);}/**\n   *\n   * @returns {boolean} true if password is correct, false otherwise\n   */var uploadImageHandler=function uploadImageHandler(){if(imageUpload==null){return;}var currentImageRef=ref(storage,\"sessions/\".concat(currentSession,\"/\").concat(imageUpload.name));setImageRef(currentImageRef);uploadBytes(currentImageRef,imageUpload).then(function(snapshot){setImageList(function(prev){return[].concat(_toConsumableArray(prev),[snapshot.ref]);});// getDownloadURL(snapshot.ref).then((url) => {\n//   setImageList((prev) => [...prev, url]);\n// });\n});refreshFiles();};/**\n   *\n   * @param {*} url\n   */var downloadImageHandler=function downloadImageHandler(url,name){var xhr=new XMLHttpRequest();xhr.responseType=\"blob\";xhr.onload=function(event){var blob=xhr.response;var a=document.createElement(\"a\");var urlObject=window.URL.createObjectURL(blob);a.href=urlObject;a.download=name;// the file name\na.style.display=\"none\";document.body.appendChild(a);a.click();window.URL.revokeObjectURL(urlObject);document.body.removeChild(a);};xhr.open(\"GET\",url);xhr.send();};/**\n   *  Gets the list of images from the database and sets the imageList state\n   *\n   */var deleteImageHandler=function deleteImageHandler(){listAll(imageListRef).then(function(response){response.items.forEach(function(item){deleteObject(item).then(function(){}).catch(function(error){});});}).catch(function(error){});setImageList([]);refreshFiles();};var deleteSingleHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url){var response,itemPromises;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return listAll(imageListRef);case 3:response=_context2.sent;itemPromises=response.items.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item){var itemUrl;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getDownloadURL(item);case 2:itemUrl=_context.sent;if(!(itemUrl===url)){_context.next=12;break;}_context.prev=4;_context.next=7;return deleteObject(item);case 7:setImageList(function(prev){return _toConsumableArray(prev.filter(function(i){return i!==itemUrl;}));});_context.next=12;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](4);case 12:case\"end\":return _context.stop();}},_callee,null,[[4,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}());// Wait for all itemPromises to complete before resolving\n_context2.next=7;return Promise.all(itemPromises);case 7:_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,9]]);}));return function deleteSingleHandler(_x){return _ref.apply(this,arguments);};}();/*\n   * Checks the password against the files in database\n   *\n   */var passwordHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(pin){var check;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return checkPasswordRepo(pin);case 2:check=_context3.sent;if(!check){_context3.next=8;break;}setCurrentSession(pin);return _context3.abrupt(\"return\",true);case 8:return _context3.abrupt(\"return\",false);case 9:case\"end\":return _context3.stop();}},_callee3);}));return function passwordHandler(_x3){return _ref3.apply(this,arguments);};}();var checkPasswordRepo=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(password){var out,responses;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:out=false;_context4.next=3;return listAll(sessionListRef).then(function(response){return response;}).catch(function(error){return false;});case 3:responses=_context4.sent;responses.prefixes.forEach(function(prefix){if(prefix._location.path.split(\"/\")[1]===password){out=true;}});return _context4.abrupt(\"return\",out);case 6:case\"end\":return _context4.stop();}},_callee4);}));return function checkPasswordRepo(_x4){return _ref4.apply(this,arguments);};}();var generateSessionHandler=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var randSession,check;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:randSession=Math.floor(Math.random()*90000+10000);_context5.next=3;return checkPasswordRepo(randSession);case 3:check=_context5.sent;case 4:if(!check){_context5.next=11;break;}randSession=Math.floor(Math.random()*90000+10000);_context5.next=8;return checkPasswordRepo(randSession);case 8:check=_context5.sent;_context5.next=4;break;case 11:setCurrentSession(randSession);case 12:case\"end\":return _context5.stop();}},_callee5);}));return function generateSessionHandler(){return _ref5.apply(this,arguments);};}();var fetchUrls=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(item){var url;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getDownloadURL(item);case 2:url=_context6.sent;setImageUrls(function(prev){return[].concat(_toConsumableArray(prev),[url]);});case 4:case\"end\":return _context6.stop();}},_callee6);}));return function fetchUrls(_x5){return _ref6.apply(this,arguments);};}();////////////////////////////\n// APP SWITCHER\n////////////////////////////\nvar _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),activeIndex=_useState14[0],setActiveIndex=_useState14[1];// Use the useEffect hook to apply the CSS classes based on the condition\nuseEffect(function(){if(activeIndex===0){document.body.className=\"panel-landing\";}else{document.body.className=\"bodyClass2\";}// Cleanup function to remove the classes when the component is unmounted\nreturn function(){document.body.className=\"\";};},[activeIndex]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Panel,{isActive:activeIndex===0,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Landing,{onAction:function onAction(){return setActiveIndex(1);},generateSessionHandler:generateSessionHandler,passwordHandler:passwordHandler,refreshFiles:refreshFiles})})}),/*#__PURE__*/_jsx(Panel,{isActive:activeIndex===1,children:/*#__PURE__*/_jsx(\"div\",{className:\"panel1\",children:/*#__PURE__*/_jsx(UploadDownload,{onAction:function onAction(){return setActiveIndex(0);},currentSession:currentSession,setImageHolder:setImageHolder,uploadImageHandler:uploadImageHandler,deleteImageHandler:deleteImageHandler,setImageList:setImageList,setImageUrls:setImageUrls,imageListRef:imageListRef,fetchUrls:fetchUrls,imageList:imageList,downloadImageHandler:downloadImageHandler,deleteSingleHandler:deleteSingleHandler,refresh:refresh,refreshFiles:refreshFiles})})})]});////////////////////////////\n// END APP SWITCHER\n////////////////////////////\n}function Panel(_ref7){var children=_ref7.children,isActive=_ref7.isActive;return/*#__PURE__*/_jsx(\"section\",{className:\"panel\",children:isActive?/*#__PURE__*/_jsx(\"p\",{children:children}):null});}export function Landing(_ref8){var onAction=_ref8.onAction,generateSessionHandler=_ref8.generateSessionHandler,passwordHandler=_ref8.passwordHandler,refreshFiles=_ref8.refreshFiles;var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),AuthPin=_useState16[0],setAuthPin=_useState16[1];var handleAuth=function handleAuth(v){if(v.length<=5){setAuthPin(v);}};function generateCode(){onAction();generateSessionHandler();}function handleSubmitCode(){return _handleSubmitCode.apply(this,arguments);}function _handleSubmitCode(){_handleSubmitCode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.next=2;return passwordHandler(AuthPin);case 2:if(!_context7.sent){_context7.next=7;break;}refreshFiles();onAction();_context7.next=8;break;case 7:alert(\"Incorrect Pin\");case 8:case\"end\":return _context7.stop();}},_callee7);}));return _handleSubmitCode.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{class:\"center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-link\",children:\"Firefly\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-23\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button-24\",onClick:generateCode,children:\"New Session\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"input pin:\"}),/*#__PURE__*/_jsx(\"input\",{value:AuthPin,onChange:function onChange(e){return handleAuth(e.target.value);},className:\"space\",type:\"number\",id:\"pin\",pattern:\"\\\\d*\",inputMode:\"numeric\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitCode,className:\"button-25\".concat(AuthPin.length!==5?\" disabled\":\"\"),disabled:AuthPin.length!==5,children:\"Submit\"})]})]});}export function UploadDownload(_ref9){var onAction=_ref9.onAction,currentSession=_ref9.currentSession,setImageHolder=_ref9.setImageHolder,uploadImageHandler=_ref9.uploadImageHandler,deleteImageHandler=_ref9.deleteImageHandler,setImageList=_ref9.setImageList,setImageUrls=_ref9.setImageUrls,imageListRef=_ref9.imageListRef,fetchUrls=_ref9.fetchUrls,imageList=_ref9.imageList,downloadImageHandler=_ref9.downloadImageHandler,deleteSingleHandler=_ref9.deleteSingleHandler,refresh=_ref9.refresh,refreshFiles=_ref9.refreshFiles;function triggerFileInputClick(){document.getElementById(\"hiddenFileInput\").click();}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Table,{setImageList:setImageList,setImageUrls:setImageUrls,imageListRef:imageListRef,fetchUrls:fetchUrls,currentSession:currentSession,imageList:imageList,deleteSingleHandler:deleteSingleHandler,downloadImageHandler:downloadImageHandler,refresh:refresh,refreshFiles:refreshFiles}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-link-2\",children:\"Firefly\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"showcode\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"code:\"}),/*#__PURE__*/_jsx(\"h1\",{children:currentSession})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"buttons-list\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"hiddenFileInput\",style:{display:\"none\"},onChange:function onChange(event){return setImageHolder(event.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:triggerFileInputClick,className:\"button-25\",children:\"Upload File\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button-25\",onClick:uploadImageHandler,children:\"Send File\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button-26\",onClick:deleteImageHandler,children:\"Delete All\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button-26\",onClick:refreshFiles,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"showcode-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"time left\"}),/*#__PURE__*/_jsx(Timer,{deleteImageHandler:deleteImageHandler,onAction:onAction})]})]})]});}export function Table(_ref10){var setImageList=_ref10.setImageList,imageListRef=_ref10.imageListRef,currentSession=_ref10.currentSession,deleteSingleHandler=_ref10.deleteSingleHandler,downloadImageHandler=_ref10.downloadImageHandler,refresh=_ref10.refresh,refreshFiles=_ref10.refreshFiles;var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),files=_useState18[0],setFiles=_useState18[1];var downloadFile=function downloadFile(url,name){downloadImageHandler(url,name);};var deleteFile=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(url){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.next=2;return deleteSingleHandler(url);case 2:refreshFiles();case 3:case\"end\":return _context8.stop();}},_callee8);}));return function deleteFile(_x6){return _ref11.apply(this,arguments);};}();// async function fileList() {\n//   let objectList = await imageList.map((item) => (getObjectInfo(item)));\n//   objectList = await Promise.all(objectList);\n//   objectList = objectList.slice(0, objectList.length/2);\n//   setFiles(objectList);\n// }\nfunction fileList(_x7){return _fileList.apply(this,arguments);}function _fileList(){_fileList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(item){var obj;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:_context9.next=2;return getObjectInfo(item);case 2:obj=_context9.sent;// objectList = objectList.slice(0, objectList.length / 2);\nsetFiles(function(prev){return[].concat(_toConsumableArray(prev),[obj]);});case 4:case\"end\":return _context9.stop();}},_callee9);}));return _fileList.apply(this,arguments);}function getObjectInfo(_x8){return _getObjectInfo.apply(this,arguments);}function _getObjectInfo(){_getObjectInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(object){var storage,path,id,name,storageRef,url;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:storage=getStorage(object._service.app);path=object._location.path_;id=Math.floor(Math.random()*100);name=path.split('/').pop();storageRef=ref(storage,path);_context10.next=7;return getDownloadURL(storageRef);case 7:url=_context10.sent;return _context10.abrupt(\"return\",{id:id,name:name,url:url});case 9:case\"end\":return _context10.stop();}},_callee10);}));return _getObjectInfo.apply(this,arguments);}useEffect(function(){setImageList([]);setFiles([]);listAll(imageListRef).then(function(response){response.items.forEach(function(item){setImageList(function(prev){return[].concat(_toConsumableArray(prev),[item]);});fileList(item);});// fileList();\n});// eslint-disable-next-line\n},[currentSession,refresh]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"File Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Download\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:files.map(function(file){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:file.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button-25\",onClick:function onClick(){return downloadFile(file.url,file.name);},children:\"Download\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button-25\",onClick:function onClick(){return deleteFile(file.url);},children:\"Delete\"})})]},file.id);})})]})});}export function Timer(_ref12){var deleteImageHandler=_ref12.deleteImageHandler,onAction=_ref12.onAction;// We need ref in this, because we are dealing\n// with JS setInterval to keep track of it and\n// stop it when needed\n// im just testing my git here so ignore this line\nvar Ref=useRef(null);// The state for our timer\nvar _useState19=useState(\"00:00:00\"),_useState20=_slicedToArray(_useState19,2),timer=_useState20[0],setTimer=_useState20[1];var getTimeRemaining=function getTimeRemaining(e){var total=Date.parse(e)-Date.parse(new Date());var seconds=Math.floor(total/1000%60);var minutes=Math.floor(total/1000/60%60);var hours=Math.floor(total/1000/60/60%24);return{total:total,hours:hours,minutes:minutes,seconds:seconds};};var startTimer=function startTimer(e){var _getTimeRemaining=getTimeRemaining(e),total=_getTimeRemaining.total,hours=_getTimeRemaining.hours,minutes=_getTimeRemaining.minutes,seconds=_getTimeRemaining.seconds;if(total>=0){// update the timer\n// check if less than 10 then we need to\n// add '0' at the beginning of the variable\nsetTimer((hours>9?hours:\"0\"+hours)+\":\"+(minutes>9?minutes:\"0\"+minutes)+\":\"+(seconds>9?seconds:\"0\"+seconds));}else{// When the timer reaches zero, call the deleteImageHandler\ndeleteImageHandler();onAction();alert(\"Time's up!\");// Clear the interval to stop the timer\nif(Ref.current)clearInterval(Ref.current);}};var clearTimer=function clearTimer(e){// If you adjust it you should also need to\n// adjust the Endtime formula we are about\n// to code next\n// ADJUST TO CHANGE THE AMOUNT OF TIME\nsetTimer(\"00:15:00\");// If you try to remove this line the\n// updating of timer Variable will be\n// after 1000ms or 1sec\nif(Ref.current)clearInterval(Ref.current);var id=setInterval(function(){startTimer(e);},1000);Ref.current=id;};var getDeadTime=function getDeadTime(){var deadline=new Date();// ADJUST THE NUMBER OF SECONDS IN THE TIMER HERE (currently 900)\ndeadline.setSeconds(deadline.getSeconds()+900);return deadline;};// We can use useEffect so that when the component\n// mount the timer will start as soon as possible\n// We put empty array to act as componentDid\n// mount only\nuseEffect(function(){clearTimer(getDeadTime());// eslint-disable-next-line\n},[]);// Another way to call the clearTimer() to start\n// the countdown is via action event from the\n// button first we create function to be called\n// by the button\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:timer})});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","getDownloadURL","listAll","ref","uploadBytes","deleteObject","getStorage","storage","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","currentSession","setCurrentSession","_useState3","_useState4","imageUpload","setImageHolder","_useState5","_useState6","imageList","setImageList","imageListRef","concat","sessionListRef","_useState7","_useState8","setImageRef","_useState9","_useState10","setImageUrls","_useState11","_useState12","refresh","setRefresh","refreshFiles","uploadImageHandler","currentImageRef","name","then","snapshot","prev","_toConsumableArray","downloadImageHandler","url","xhr","XMLHttpRequest","responseType","onload","event","blob","response","a","document","createElement","urlObject","window","URL","createObjectURL","href","download","style","display","body","appendChild","click","revokeObjectURL","removeChild","open","send","deleteImageHandler","items","forEach","item","catch","error","deleteSingleHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","itemPromises","wrap","_callee2$","_context2","next","sent","map","_ref2","_callee","itemUrl","_callee$","_context","filter","i","t0","stop","_x2","apply","arguments","Promise","all","_x","passwordHandler","_ref3","_callee3","pin","check","_callee3$","_context3","checkPasswordRepo","abrupt","_x3","_ref4","_callee4","password","out","responses","_callee4$","_context4","prefixes","prefix","_location","path","split","_x4","generateSessionHandler","_ref5","_callee5","randSession","_callee5$","_context5","Math","floor","random","fetchUrls","_ref6","_callee6","_callee6$","_context6","_x5","_useState13","_useState14","activeIndex","setActiveIndex","className","children","Panel","isActive","Landing","onAction","UploadDownload","_ref7","_ref8","_useState15","_useState16","AuthPin","setAuthPin","handleAuth","v","length","generateCode","handleSubmitCode","_handleSubmitCode","_callee7","_callee7$","_context7","alert","class","onClick","value","onChange","e","target","type","id","pattern","inputMode","disabled","_ref9","triggerFileInputClick","getElementById","Table","files","Timer","_ref10","_useState17","_useState18","setFiles","downloadFile","deleteFile","_ref11","_callee8","_callee8$","_context8","_x6","fileList","_x7","_fileList","_callee9","obj","_callee9$","_context9","getObjectInfo","_x8","_getObjectInfo","_callee10","object","storageRef","_callee10$","_context10","_service","app","path_","pop","file","_ref12","Ref","_useState19","_useState20","timer","setTimer","getTimeRemaining","total","Date","parse","seconds","minutes","hours","startTimer","_getTimeRemaining","current","clearInterval","clearTimer","setInterval","getDeadTime","deadline","setSeconds","getSeconds"],"sources":["/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport {\n  getDownloadURL,\n  listAll,\n  ref,\n  uploadBytes,\n  deleteObject,\n  getStorage\n} from \"firebase/storage\";\nimport { storage } from \"./firebase/firebase.js\";\n\nfunction App() {\n  const [currentSession, setCurrentSession] = useState();\n  const [imageUpload, setImageHolder] = useState(null);\n  const [imageList, setImageList] = useState([]);\n  const imageListRef = ref(storage, `sessions/${currentSession}`);\n  const sessionListRef = ref(storage, \"sessions/\");\n  const [, setImageRef] = useState(\"\");\n  const [, setImageUrls] = useState([]);\n\n\n  const [refresh, setRefresh] = useState(false);\n\n  function refreshFiles() {\n    setRefresh(!refresh);\n  }\n\n  /**\n   *\n   * @returns {boolean} true if password is correct, false otherwise\n   */\n  const uploadImageHandler = () => {\n    if (imageUpload == null) {\n      return;\n    }\n\n    let currentImageRef = ref(\n      storage,\n      `sessions/${currentSession}/${imageUpload.name}`\n    );\n\n    setImageRef(currentImageRef);\n\n    uploadBytes(currentImageRef, imageUpload).then((snapshot) => {\n      setImageList((prev) => [...prev, snapshot.ref]);\n\n      // getDownloadURL(snapshot.ref).then((url) => {\n      //   setImageList((prev) => [...prev, url]);\n      // });\n    });\n\n    refreshFiles();\n  };\n\n  /**\n   *\n   * @param {*} url\n   */\n  const downloadImageHandler = (url, name) => {\n    const xhr = new XMLHttpRequest();\n    xhr.responseType = \"blob\";\n    xhr.onload = (event) => {\n      const blob = xhr.response;\n      const a = document.createElement(\"a\");\n      const urlObject = window.URL.createObjectURL(blob);\n      a.href = urlObject;\n      a.download = name; // the file name\n      a.style.display = \"none\";\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(urlObject);\n      document.body.removeChild(a);\n    };\n    xhr.open(\"GET\", url);\n    xhr.send();\n  };\n\n  /**\n   *  Gets the list of images from the database and sets the imageList state\n   *\n   */\n  const deleteImageHandler = () => {\n    listAll(imageListRef)\n      .then((response) => {\n        response.items.forEach((item) => {\n          deleteObject(item)\n            .then(() => {\n            })\n            .catch((error) => {\n            });\n        });\n      })\n      .catch((error) => {\n      });\n    setImageList([]);\n    refreshFiles();\n  };\n\n  const deleteSingleHandler = async (url) => {\n    try {\n      const response = await listAll(imageListRef);\n      \n      const itemPromises = response.items.map(async (item) => {\n        const itemUrl = await getDownloadURL(item);\n  \n        if (itemUrl === url) {\n          try {\n            await deleteObject(item);\n            setImageList((prev) => [\n              ...prev.filter((i) => i !== itemUrl),\n            ]);\n          } catch (error) {\n          }\n        }\n      });\n  \n      // Wait for all itemPromises to complete before resolving\n      await Promise.all(itemPromises);\n  \n    } catch (error) {\n    }\n  };\n  \n\n  /*\n   * Checks the password against the files in database\n   *\n   */\n  const passwordHandler = async (pin) => {\n    let check = await checkPasswordRepo(pin);\n\n    if (check) {\n      setCurrentSession(pin);\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const checkPasswordRepo = async (password) => {\n    let out = false;\n\n    let responses = await listAll(sessionListRef)\n      .then((response) => response)\n      .catch((error) => {\n        return false;\n      });\n\n    responses.prefixes.forEach((prefix) => {\n      if (prefix._location.path.split(\"/\")[1] === password) {\n        out = true;\n      }\n    });\n    return out;\n  };\n\n  const generateSessionHandler = async () => {\n    let randSession = Math.floor(Math.random() * 90000 + 10000);\n    let check = await checkPasswordRepo(randSession);\n\n    while (check) {\n      randSession = Math.floor(Math.random() * 90000 + 10000);\n      check = await checkPasswordRepo(randSession);\n    }\n\n    setCurrentSession(randSession);\n  };\n\n  const fetchUrls = async (item) => {\n    const url = await getDownloadURL(item);\n    setImageUrls((prev) => [...prev, url]);\n  };\n\n\n\n  ////////////////////////////\n  // APP SWITCHER\n  ////////////////////////////\n  const [activeIndex, setActiveIndex] = useState(0);\n\n  // Use the useEffect hook to apply the CSS classes based on the condition\n  useEffect(() => {\n    if (activeIndex === 0) {\n      document.body.className = \"panel-landing\";\n    } else {\n      document.body.className = \"bodyClass2\";\n    }\n\n    // Cleanup function to remove the classes when the component is unmounted\n    return () => {\n      document.body.className = \"\";\n    };\n  }, [activeIndex]);\n\n\n\n  return (\n    <>\n      <Panel isActive={activeIndex === 0}>\n        <div>\n          <Landing\n            onAction={() => setActiveIndex(1)}\n            generateSessionHandler={generateSessionHandler}\n            passwordHandler={passwordHandler}\n            refreshFiles={refreshFiles}\n          />\n        </div>\n      </Panel>\n\n      <Panel isActive={activeIndex === 1}>\n        <div className=\"panel1\">\n          <UploadDownload\n            onAction={() => setActiveIndex(0)}\n            currentSession={currentSession}\n            setImageHolder={setImageHolder}\n            uploadImageHandler={uploadImageHandler}\n            deleteImageHandler={deleteImageHandler}\n            setImageList={setImageList}\n            setImageUrls={setImageUrls}\n            imageListRef={imageListRef}\n            fetchUrls={fetchUrls}\n            imageList={imageList}\n            downloadImageHandler={downloadImageHandler}\n            deleteSingleHandler={deleteSingleHandler}\n            refresh={refresh}\n            refreshFiles={refreshFiles}\n          />\n        </div>\n      </Panel>\n    </>\n  );\n\n  ////////////////////////////\n  // END APP SWITCHER\n  ////////////////////////////\n}\n\nfunction Panel({ children, isActive }) {\n  return (\n    <section className=\"panel\">{isActive ? <p>{children}</p> : null}</section>\n  );\n}\n\nexport function Landing({ onAction, generateSessionHandler, passwordHandler, refreshFiles }) {\n  const [AuthPin, setAuthPin] = useState(\"\");\n\n  const handleAuth = (v) => {\n    if (v.length <= 5) {\n      setAuthPin(v);\n    }\n  };\n\n  function generateCode() {\n    onAction();\n    generateSessionHandler();\n  }\n\n  async function handleSubmitCode() {\n    if (await passwordHandler(AuthPin)) {\n      refreshFiles();\n      onAction();\n    }\n    else{\n      alert(\"Incorrect Pin\")\n    }\n  }\n\n  return (\n    <div class=\"center\">\n      <h1 className=\"font-link\">Firefly</h1>\n      <br></br>\n      <div className=\"button-23\">\n        <div>\n          {\n            <button className=\"button-24\" onClick={generateCode}>\n              New Session\n            </button>\n          }\n        </div>\n\n        <br></br>\n        <br></br>\n        <p>input pin:</p>\n        <input\n          value={AuthPin}\n          onChange={(e) => handleAuth(e.target.value)}\n          className=\"space\"\n          type=\"number\"\n          id=\"pin\"\n          pattern=\"\\d*\"\n          inputMode=\"numeric\"\n        />\n        <br></br>\n        <br></br>\n        <button\n          onClick={handleSubmitCode}\n          className={`button-25${AuthPin.length !== 5 ? \" disabled\" : \"\"}`}\n          disabled={AuthPin.length !== 5}\n        >\n          Submit\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport function UploadDownload({\n  onAction,\n  currentSession,\n  setImageHolder,\n  uploadImageHandler,\n  deleteImageHandler,\n  setImageList,\n  setImageUrls,\n  imageListRef,\n  fetchUrls,\n  imageList,\n  downloadImageHandler,\n  deleteSingleHandler,\n  refresh,\n  refreshFiles,\n}) {\n\n  function triggerFileInputClick() {\n    document.getElementById(\"hiddenFileInput\").click();\n  }\n\n\n\n  return (\n    <div>\n      <Table\n        setImageList={setImageList}\n        setImageUrls={setImageUrls}\n        imageListRef={imageListRef}\n        fetchUrls={fetchUrls}\n        currentSession={currentSession}\n        imageList={imageList}\n        deleteSingleHandler={deleteSingleHandler}\n        downloadImageHandler={downloadImageHandler}\n        refresh={refresh}\n        refreshFiles={refreshFiles}\n      />\n      <div className=\"sidebar\">\n        <h1 className=\"font-link-2\">Firefly</h1>\n        <div className=\"showcode\">\n          <p>code:</p>\n          <h1>{currentSession}</h1>\n        </div>\n        <br></br>\n        <br></br>\n        <br></br>\n\n        {\n          <form className=\"buttons-list\">\n            <input\n              type=\"file\"\n              id=\"hiddenFileInput\"\n              style={{ display: \"none\" }}\n              onChange={(event) => setImageHolder(event.target.files[0])}\n            />\n            <button\n              type=\"button\"\n              onClick={triggerFileInputClick}\n              className=\"button-25\"\n            >\n              Upload File\n            </button>\n            <button\n              type=\"button\"\n              className=\"button-25\"\n              onClick={uploadImageHandler}\n            >\n              Send File\n            </button>\n  \n            <br></br>\n            <br></br>\n            <button\n              type=\"button\"\n              className=\"button-26\"\n              onClick={deleteImageHandler}\n            >\n              Delete All\n            </button>\n            <br></br>\n            <button\n              type=\"button\"\n              className=\"button-26\"\n              onClick={refreshFiles}\n            >\n              Refresh\n            </button>\n          </form>\n        }\n        <br></br>\n        <div className=\"showcode-2\">\n          <p>time left</p>\n          <Timer \n            deleteImageHandler={deleteImageHandler}\n            onAction={onAction}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\nexport function Table({\n  setImageList,\n  imageListRef,\n  currentSession,\n  deleteSingleHandler,\n  downloadImageHandler,\n  refresh,\n  refreshFiles\n}) {\n  const [files, setFiles] = useState([]);\n\n  const downloadFile = (url, name) => {\n    downloadImageHandler(url, name);\n  };\n\n  const deleteFile = async (url) => {\n    await deleteSingleHandler(url);\n    refreshFiles();\n  };\n\n\n  // async function fileList() {\n  //   let objectList = await imageList.map((item) => (getObjectInfo(item)));\n  //   objectList = await Promise.all(objectList);\n  //   objectList = objectList.slice(0, objectList.length/2);\n  //   setFiles(objectList);\n  // }\n\n  async function fileList(item) {\n    // let objectList = await Promise.all(imageList.map((item) => getObjectInfo(item)));\n    let obj = await getObjectInfo(item);\n    // objectList = objectList.slice(0, objectList.length / 2);\n    setFiles(prev => [...prev, obj]);\n}\n\n  async function getObjectInfo(object) {\n    const storage = getStorage(object._service.app);\n    const path = object._location.path_;\n    const id = Math.floor(Math.random() * 100);\n    const name = path.split('/').pop();\n    const storageRef = ref(storage, path);\n    const url = await getDownloadURL(storageRef);\n\n    return {\n        id,\n        name,\n        url\n    };\n  }\n  \n\n\nuseEffect(() => {\n  setImageList([]);\n  setFiles([]);\n  listAll(imageListRef).then((response) => {\n      response.items.forEach((item) => {\n          setImageList((prev) => [...prev, item]);\n          fileList(item);\n      });\n      // fileList();\n  });\n  // eslint-disable-next-line\n}, [currentSession, refresh]);\n\n  return (\n    <div className=\"App\">\n      <table>\n        <thead>\n          <tr>\n            <th>File Name</th>\n            <th>Download</th>\n            <th>Delete</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {files.map((file) => (\n            <tr key={file.id}>\n              <td>{file.name}</td>\n              <td>\n                <button\n                  className=\"button-25\"\n                  onClick={() => downloadFile(file.url, file.name)}\n                >\n                  Download\n                </button>\n              </td>\n              <td>\n                <button\n                  className=\"button-25\"\n                  onClick={() => deleteFile(file.url)}\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport function Timer({deleteImageHandler, onAction}) {\n  // We need ref in this, because we are dealing\n  // with JS setInterval to keep track of it and\n  // stop it when needed\n  // im just testing my git here so ignore this line\n  const Ref = useRef(null);\n\n  // The state for our timer\n  const [timer, setTimer] = useState(\"00:00:00\");\n\n  const getTimeRemaining = (e) => {\n    const total = Date.parse(e) - Date.parse(new Date());\n    const seconds = Math.floor((total / 1000) % 60);\n    const minutes = Math.floor((total / 1000 / 60) % 60);\n    const hours = Math.floor((total / 1000 / 60 / 60) % 24);\n    return {\n      total,\n      hours,\n      minutes,\n      seconds,\n    };\n  };\n\n  const startTimer = (e) => {\n    let { total, hours, minutes, seconds } = getTimeRemaining(e);\n    if (total >= 0) {\n      // update the timer\n      // check if less than 10 then we need to\n      // add '0' at the beginning of the variable\n      setTimer(\n        (hours > 9 ? hours : \"0\" + hours) +\n          \":\" +\n          (minutes > 9 ? minutes : \"0\" + minutes) +\n          \":\" +\n          (seconds > 9 ? seconds : \"0\" + seconds)\n      );\n    } else {\n      // When the timer reaches zero, call the deleteImageHandler\n      deleteImageHandler();\n      onAction();\n      alert(\"Time's up!\")\n  \n      // Clear the interval to stop the timer\n      if (Ref.current) clearInterval(Ref.current);\n    }\n  };\n\n  const clearTimer = (e) => {\n    // If you adjust it you should also need to\n    // adjust the Endtime formula we are about\n    // to code next\n    // ADJUST TO CHANGE THE AMOUNT OF TIME\n    setTimer(\"00:15:00\");\n\n    // If you try to remove this line the\n    // updating of timer Variable will be\n    // after 1000ms or 1sec\n    if (Ref.current) clearInterval(Ref.current);\n    const id = setInterval(() => {\n      startTimer(e);\n    }, 1000);\n    Ref.current = id;\n  };\n\n  const getDeadTime = () => {\n    let deadline = new Date();\n\n    // ADJUST THE NUMBER OF SECONDS IN THE TIMER HERE (currently 900)\n    deadline.setSeconds(deadline.getSeconds() + 900);\n    return deadline;\n  };\n\n  // We can use useEffect so that when the component\n  // mount the timer will start as soon as possible\n\n  // We put empty array to act as componentDid\n  // mount only\n  useEffect(() => {\n    clearTimer(getDeadTime());\n\n    // eslint-disable-next-line\n  }, []);\n\n  // Another way to call the clearTimer() to start\n  // the countdown is via action event from the\n  // button first we create function to be called\n  // by the button\n\n  return (\n    <div>\n      <h1>{timer}</h1>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}