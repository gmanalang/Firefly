{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import React,{useState,useRef,useEffect}from\"react\";import{getDownloadURL,listAll,ref,uploadBytes,deleteObject,getStorage}from\"firebase/storage\";import{storage}from\"./firebase/firebase.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentSession=_useState2[0],setCurrentSession=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),imageUpload=_useState4[0],setImageHolder=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),imageList=_useState6[0],setImageList=_useState6[1];var imageListRef=ref(storage,\"sessions/\".concat(currentSession));var sessionListRef=ref(storage,\"sessions/\");var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),files=_useState8[0],setFiles=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),setImageRef=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),setImageUrls=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),refresh=_useState14[0],setRefresh=_useState14[1];function refreshFiles(){return _refreshFiles.apply(this,arguments);}function _refreshFiles(){_refreshFiles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(){return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:_context9.next=2;return setRefresh(!refresh);case 2:case\"end\":return _context9.stop();}},_callee9);}));return _refreshFiles.apply(this,arguments);}function getObjectInfo(_x){return _getObjectInfo.apply(this,arguments);}/**\n   *\n   * @returns {boolean} true if password is correct, false otherwise\n   */ // const uploadImageHandler = async () => {\n//   if (imageUpload == null) {\n//     return;\n//   }\n//   let currentImageRef = ref(\n//     storage,\n//     `sessions/${currentSession}/${imageUpload.name}`\n//   );\n//   setImageRef(currentImageRef);\n//   uploadBytes(currentImageRef, imageUpload).then((snapshot) => {\n//     setImageList((prev) => [...prev, snapshot.ref]);\n//   });\n//   await refreshFiles();\n// };\n/**\n   *\n   * @returns {boolean} true if password is correct, false otherwise\n   */function _getObjectInfo(){_getObjectInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(object){var storage,path,id,name,storageRef,url;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:storage=getStorage(object._service.app);path=object._location.path_;id=Math.floor(Math.random()*100);name=path.split(\"/\").pop();storageRef=ref(storage,path);_context10.next=7;return getDownloadURL(storageRef);case 7:url=_context10.sent;return _context10.abrupt(\"return\",{id:id,name:name,url:url});case 9:case\"end\":return _context10.stop();}},_callee10);}));return _getObjectInfo.apply(this,arguments);}var uploadImageHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var currentImageRef,snapshot,uploadedFileInfo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(imageUpload==null)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:currentImageRef=ref(storage,\"sessions/\".concat(currentSession,\"/\").concat(imageUpload.name));setImageRef(currentImageRef);_context.next=6;return uploadBytes(currentImageRef,imageUpload);case 6:snapshot=_context.sent;_context.next=9;return getObjectInfo(snapshot.ref);case 9:uploadedFileInfo=_context.sent;// Update the files state with the uploaded file information\nsetFiles(function(prev){return[].concat(_toConsumableArray(prev),[uploadedFileInfo]);});_context.next=13;return refreshFiles();case 13:case\"end\":return _context.stop();}},_callee);}));return function uploadImageHandler(){return _ref.apply(this,arguments);};}();/**\n   *\n   * @param {*} url\n   */var downloadImageHandler=function downloadImageHandler(url,name){var xhr=new XMLHttpRequest();xhr.responseType=\"blob\";xhr.onload=function(event){var blob=xhr.response;var a=document.createElement(\"a\");var urlObject=window.URL.createObjectURL(blob);a.href=urlObject;a.download=name;// the file name\na.style.display=\"none\";document.body.appendChild(a);a.click();window.URL.revokeObjectURL(urlObject);document.body.removeChild(a);};xhr.open(\"GET\",url);xhr.send();};/**\n   *  Gets the list of images from the database and sets the imageList state\n   *\n   */var deleteImageHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,deletePromises;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return listAll(imageListRef);case 3:response=_context2.sent;deletePromises=response.items.map(function(item){return deleteObject(item);});_context2.next=7;return Promise.all(deletePromises);case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(\"Error deleting images:\",_context2.t0);case 12:setFiles([]);_context2.next=15;return refreshFiles();case 15:case\"end\":return _context2.stop();}},_callee2,null,[[0,9]]);}));return function deleteImageHandler(){return _ref2.apply(this,arguments);};}();var deleteSingleHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(url){var response,itemPromises;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return listAll(imageListRef);case 3:response=_context4.sent;itemPromises=response.items.map(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(item){var itemUrl;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getDownloadURL(item);case 2:itemUrl=_context3.sent;if(!(itemUrl===url)){_context3.next=12;break;}_context3.prev=4;_context3.next=7;return deleteObject(item);case 7:setImageList(function(prev){return _toConsumableArray(prev.filter(function(i){return i!==itemUrl;}));});_context3.next=12;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](4);case 12:case\"end\":return _context3.stop();}},_callee3,null,[[4,10]]);}));return function(_x3){return _ref4.apply(this,arguments);};}());// Wait for all itemPromises to complete before resolving\n_context4.next=7;return Promise.all(itemPromises);case 7:_context4.next=11;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);case 11:case\"end\":return _context4.stop();}},_callee4,null,[[0,9]]);}));return function deleteSingleHandler(_x2){return _ref3.apply(this,arguments);};}();/*\n   * Checks the password against the files in database\n   *\n   */var passwordHandler=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(pin){var check;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return checkPasswordRepo(pin);case 2:check=_context5.sent;if(!check){_context5.next=8;break;}setCurrentSession(pin);return _context5.abrupt(\"return\",true);case 8:return _context5.abrupt(\"return\",false);case 9:case\"end\":return _context5.stop();}},_callee5);}));return function passwordHandler(_x4){return _ref5.apply(this,arguments);};}();var checkPasswordRepo=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(password){var out,responses;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:out=false;_context6.next=3;return listAll(sessionListRef).then(function(response){return response;}).catch(function(error){return false;});case 3:responses=_context6.sent;responses.prefixes.forEach(function(prefix){if(prefix._location.path.split(\"/\")[1]===password){out=true;}});return _context6.abrupt(\"return\",out);case 6:case\"end\":return _context6.stop();}},_callee6);}));return function checkPasswordRepo(_x5){return _ref6.apply(this,arguments);};}();var generateSessionHandler=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var randSession,check;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:randSession=Math.floor(Math.random()*90000+10000);_context7.next=3;return checkPasswordRepo(randSession);case 3:check=_context7.sent;case 4:if(!check){_context7.next=11;break;}randSession=Math.floor(Math.random()*90000+10000);_context7.next=8;return checkPasswordRepo(randSession);case 8:check=_context7.sent;_context7.next=4;break;case 11:setCurrentSession(randSession);case 12:case\"end\":return _context7.stop();}},_callee7);}));return function generateSessionHandler(){return _ref7.apply(this,arguments);};}();var fetchUrls=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(item){var url;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.next=2;return getDownloadURL(item);case 2:url=_context8.sent;setImageUrls(function(prev){return[].concat(_toConsumableArray(prev),[url]);});case 4:case\"end\":return _context8.stop();}},_callee8);}));return function fetchUrls(_x6){return _ref8.apply(this,arguments);};}();////////////////////////////\n// APP SWITCHER\n////////////////////////////\nvar _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),activeIndex=_useState16[0],setActiveIndex=_useState16[1];// Use the useEffect hook to apply the CSS classes based on the condition\nuseEffect(function(){if(activeIndex===0){document.body.className=\"panel-landing\";}else{document.body.className=\"bodyClass2\";}// Cleanup function to remove the classes when the component is unmounted\nreturn function(){document.body.className=\"\";};},[activeIndex]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Panel,{isActive:activeIndex===0,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Landing,{onAction:function onAction(){return setActiveIndex(1);},generateSessionHandler:generateSessionHandler,passwordHandler:passwordHandler,refreshFiles:refreshFiles})})}),/*#__PURE__*/_jsx(Panel,{isActive:activeIndex===1,children:/*#__PURE__*/_jsx(\"div\",{className:\"panel1\",children:/*#__PURE__*/_jsx(UploadDownload,{onAction:function onAction(){return setActiveIndex(0);},currentSession:currentSession,setImageHolder:setImageHolder,uploadImageHandler:uploadImageHandler,deleteImageHandler:deleteImageHandler,setImageList:setImageList,setImageUrls:setImageUrls,imageListRef:imageListRef,fetchUrls:fetchUrls,imageList:imageList,downloadImageHandler:downloadImageHandler,deleteSingleHandler:deleteSingleHandler,refresh:refresh,refreshFiles:refreshFiles,setFiles:setFiles,getObjectInfo:getObjectInfo,files:files})})})]});////////////////////////////\n// END APP SWITCHER\n////////////////////////////\n}function Panel(_ref9){var children=_ref9.children,isActive=_ref9.isActive;return/*#__PURE__*/_jsx(\"section\",{className:\"panel\",children:isActive?/*#__PURE__*/_jsx(\"p\",{children:children}):null});}export function Landing(_ref10){var onAction=_ref10.onAction,generateSessionHandler=_ref10.generateSessionHandler,passwordHandler=_ref10.passwordHandler,refreshFiles=_ref10.refreshFiles;var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),AuthPin=_useState18[0],setAuthPin=_useState18[1];var handleAuth=function handleAuth(v){if(v.length<=5){setAuthPin(v);}};function generateCode(){onAction();generateSessionHandler();}function handleSubmitCode(){return _handleSubmitCode.apply(this,arguments);}function _handleSubmitCode(){_handleSubmitCode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(){return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:_context11.next=2;return passwordHandler(AuthPin);case 2:if(!_context11.sent){_context11.next=8;break;}_context11.next=5;return refreshFiles();case 5:onAction();_context11.next=9;break;case 8:alert(\"Incorrect Pin\");case 9:case\"end\":return _context11.stop();}},_callee11);}));return _handleSubmitCode.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{class:\"center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-link\",children:\"Firefly\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-23\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button-24\",onClick:generateCode,children:\"New Session\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"input pin:\"}),/*#__PURE__*/_jsx(\"input\",{value:AuthPin,onChange:function onChange(e){return handleAuth(e.target.value);},className:\"space\",type:\"number\",id:\"pin\",pattern:\"\\\\d*\",inputMode:\"numeric\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitCode,className:\"button-25\".concat(AuthPin.length!==5?\" disabled\":\"\"),disabled:AuthPin.length!==5,children:\"Submit\"})]})]});}export function UploadDownload(_ref11){var onAction=_ref11.onAction,currentSession=_ref11.currentSession,setImageHolder=_ref11.setImageHolder,uploadImageHandler=_ref11.uploadImageHandler,deleteImageHandler=_ref11.deleteImageHandler,setImageList=_ref11.setImageList,setImageUrls=_ref11.setImageUrls,imageListRef=_ref11.imageListRef,fetchUrls=_ref11.fetchUrls,imageList=_ref11.imageList,downloadImageHandler=_ref11.downloadImageHandler,deleteSingleHandler=_ref11.deleteSingleHandler,refresh=_ref11.refresh,refreshFiles=_ref11.refreshFiles,getObjectInfo=_ref11.getObjectInfo,setFiles=_ref11.setFiles,files=_ref11.files;function triggerFileInputClick(){document.getElementById(\"hiddenFileInput\").click();}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Table,{setImageList:setImageList,setImageUrls:setImageUrls,imageListRef:imageListRef,fetchUrls:fetchUrls,currentSession:currentSession,imageList:imageList,deleteSingleHandler:deleteSingleHandler,downloadImageHandler:downloadImageHandler,refresh:refresh,refreshFiles:refreshFiles,getObjectInfo:getObjectInfo,setFiles:setFiles,files:files}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-link-2\",children:\"Firefly\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"showcode\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"code:\"}),/*#__PURE__*/_jsx(\"h1\",{children:currentSession})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"buttons-list\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"hiddenFileInput\",style:{display:\"none\"},onChange:function onChange(event){return setImageHolder(event.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:triggerFileInputClick,className:\"button-25\",children:\"Upload File\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button-25\",onClick:uploadImageHandler,children:\"Send File\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button-26\",onClick:deleteImageHandler,children:\"Delete All\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button-26\",onClick:refreshFiles,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"showcode-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"time left\"}),/*#__PURE__*/_jsx(Timer,{deleteImageHandler:deleteImageHandler,onAction:onAction})]})]})]});}export function Table(_ref12){var setImageList=_ref12.setImageList,imageListRef=_ref12.imageListRef,currentSession=_ref12.currentSession,deleteSingleHandler=_ref12.deleteSingleHandler,downloadImageHandler=_ref12.downloadImageHandler,refresh=_ref12.refresh,refreshFiles=_ref12.refreshFiles,getObjectInfo=_ref12.getObjectInfo,setFiles=_ref12.setFiles,files=_ref12.files;var downloadFile=function downloadFile(url,name){downloadImageHandler(url,name);};var deleteFile=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(url){return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:_context12.next=2;return deleteSingleHandler(url);case 2:refreshFiles();case 3:case\"end\":return _context12.stop();}},_callee12);}));return function deleteFile(_x7){return _ref13.apply(this,arguments);};}();//   async function fileList(item) {\n//     // let objectList = await Promise.all(imageList.map((item) => getObjectInfo(item)));\n//     let obj = await getObjectInfo(item);\n//     // objectList = objectList.slice(0, objectList.length / 2);\n//     setFiles(prev => [...prev, obj]);\n// }\nvar fetchFiles=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(){var response,filePromises,fetchedFiles;return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:_context14.prev=0;_context14.next=3;return listAll(imageListRef);case 3:response=_context14.sent;filePromises=response.items.map(/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(item){var fileInfo;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:_context13.next=2;return getObjectInfo(item);case 2:fileInfo=_context13.sent;return _context13.abrupt(\"return\",fileInfo);case 4:case\"end\":return _context13.stop();}},_callee13);}));return function(_x8){return _ref15.apply(this,arguments);};}());_context14.next=7;return Promise.all(filePromises);case 7:fetchedFiles=_context14.sent;setFiles(fetchedFiles);_context14.next=14;break;case 11:_context14.prev=11;_context14.t0=_context14[\"catch\"](0);console.log(\"Error fetching files:\",_context14.t0);case 14:case\"end\":return _context14.stop();}},_callee14,null,[[0,11]]);}));return function fetchFiles(){return _ref14.apply(this,arguments);};}();useEffect(function(){setFiles([]);fetchFiles();// eslint-disable-next-line\n},[currentSession,refresh]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"File Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Download\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:files.map(function(file){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:file.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button-25\",onClick:function onClick(){return downloadFile(file.url,file.name);},children:\"Download\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button-25\",onClick:function onClick(){return deleteFile(file.url);},children:\"Delete\"})})]},file.id);})})]})});}export function Timer(_ref16){var deleteImageHandler=_ref16.deleteImageHandler,onAction=_ref16.onAction;// We need ref in this, because we are dealing\n// with JS setInterval to keep track of it and\n// stop it when needed\n// im just testing my git here so ignore this line\nvar Ref=useRef(null);// The state for our timer\nvar _useState19=useState(\"00:00:00\"),_useState20=_slicedToArray(_useState19,2),timer=_useState20[0],setTimer=_useState20[1];var getTimeRemaining=function getTimeRemaining(e){var total=Date.parse(e)-Date.parse(new Date());var seconds=Math.floor(total/1000%60);var minutes=Math.floor(total/1000/60%60);var hours=Math.floor(total/1000/60/60%24);return{total:total,hours:hours,minutes:minutes,seconds:seconds};};var startTimer=function startTimer(e){var _getTimeRemaining=getTimeRemaining(e),total=_getTimeRemaining.total,hours=_getTimeRemaining.hours,minutes=_getTimeRemaining.minutes,seconds=_getTimeRemaining.seconds;if(total>=0){// update the timer\n// check if less than 10 then we need to\n// add '0' at the beginning of the variable\nsetTimer((hours>9?hours:\"0\"+hours)+\":\"+(minutes>9?minutes:\"0\"+minutes)+\":\"+(seconds>9?seconds:\"0\"+seconds));}else{// When the timer reaches zero, call the deleteImageHandler\ndeleteImageHandler();onAction();alert(\"Time's up!\");// Clear the interval to stop the timer\nif(Ref.current)clearInterval(Ref.current);}};var clearTimer=function clearTimer(e){// If you adjust it you should also need to\n// adjust the Endtime formula we are about\n// to code next\n// ADJUST TO CHANGE THE AMOUNT OF TIME\nsetTimer(\"00:15:00\");// If you try to remove this line the\n// updating of timer Variable will be\n// after 1000ms or 1sec\nif(Ref.current)clearInterval(Ref.current);var id=setInterval(function(){startTimer(e);},1000);Ref.current=id;};var getDeadTime=function getDeadTime(){var deadline=new Date();// ADJUST THE NUMBER OF SECONDS IN THE TIMER HERE (currently 900)\ndeadline.setSeconds(deadline.getSeconds()+900);return deadline;};// We can use useEffect so that when the component\n// mount the timer will start as soon as possible\n// We put empty array to act as componentDid\n// mount only\nuseEffect(function(){clearTimer(getDeadTime());// eslint-disable-next-line\n},[]);// Another way to call the clearTimer() to start\n// the countdown is via action event from the\n// button first we create function to be called\n// by the button\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:timer})});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","getDownloadURL","listAll","ref","uploadBytes","deleteObject","getStorage","storage","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","currentSession","setCurrentSession","_useState3","_useState4","imageUpload","setImageHolder","_useState5","_useState6","imageList","setImageList","imageListRef","concat","sessionListRef","_useState7","_useState8","files","setFiles","_useState9","_useState10","setImageRef","_useState11","_useState12","setImageUrls","_useState13","_useState14","refresh","setRefresh","refreshFiles","_refreshFiles","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee9","wrap","_callee9$","_context9","prev","next","stop","getObjectInfo","_x","_getObjectInfo","_callee10","object","path","id","name","storageRef","url","_callee10$","_context10","_service","app","_location","path_","Math","floor","random","split","pop","sent","abrupt","uploadImageHandler","_ref","_callee","currentImageRef","snapshot","uploadedFileInfo","_callee$","_context","_toConsumableArray","downloadImageHandler","xhr","XMLHttpRequest","responseType","onload","event","blob","response","a","document","createElement","urlObject","window","URL","createObjectURL","href","download","style","display","body","appendChild","click","revokeObjectURL","removeChild","open","send","deleteImageHandler","_ref2","_callee2","deletePromises","_callee2$","_context2","items","map","item","Promise","all","t0","console","error","deleteSingleHandler","_ref3","_callee4","itemPromises","_callee4$","_context4","_ref4","_callee3","itemUrl","_callee3$","_context3","filter","i","_x3","_x2","passwordHandler","_ref5","_callee5","pin","check","_callee5$","_context5","checkPasswordRepo","_x4","_ref6","_callee6","password","out","responses","_callee6$","_context6","then","catch","prefixes","forEach","prefix","_x5","generateSessionHandler","_ref7","_callee7","randSession","_callee7$","_context7","fetchUrls","_ref8","_callee8","_callee8$","_context8","_x6","_useState15","_useState16","activeIndex","setActiveIndex","className","children","Panel","isActive","Landing","onAction","UploadDownload","_ref9","_ref10","_useState17","_useState18","AuthPin","setAuthPin","handleAuth","v","length","generateCode","handleSubmitCode","_handleSubmitCode","_callee11","_callee11$","_context11","alert","class","onClick","value","onChange","e","target","type","pattern","inputMode","disabled","_ref11","triggerFileInputClick","getElementById","Table","Timer","_ref12","downloadFile","deleteFile","_ref13","_callee12","_callee12$","_context12","_x7","fetchFiles","_ref14","_callee14","filePromises","fetchedFiles","_callee14$","_context14","_ref15","_callee13","fileInfo","_callee13$","_context13","_x8","log","file","_ref16","Ref","_useState19","_useState20","timer","setTimer","getTimeRemaining","total","Date","parse","seconds","minutes","hours","startTimer","_getTimeRemaining","current","clearInterval","clearTimer","setInterval","getDeadTime","deadline","setSeconds","getSeconds"],"sources":["/Users/anshpatel/Desktop/Programming/Personal/Expiraments/Oasis-firefly/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport {\n  getDownloadURL,\n  listAll,\n  ref,\n  uploadBytes,\n  deleteObject,\n  getStorage,\n} from \"firebase/storage\";\nimport { storage } from \"./firebase/firebase.js\";\n\nfunction App() {\n  const [currentSession, setCurrentSession] = useState();\n  const [imageUpload, setImageHolder] = useState(null);\n  const [imageList, setImageList] = useState([]);\n  const imageListRef = ref(storage, `sessions/${currentSession}`);\n  const sessionListRef = ref(storage, \"sessions/\");\n  const [files, setFiles] = useState([]);\n  const [, setImageRef] = useState(\"\");\n  const [, setImageUrls] = useState([]);\n\n  const [refresh, setRefresh] = useState(false);\n\n  async function refreshFiles() {\n    await setRefresh(!refresh);\n  }\n\n  async function getObjectInfo(object) {\n    const storage = getStorage(object._service.app);\n    const path = object._location.path_;\n    const id = Math.floor(Math.random() * 100);\n    const name = path.split(\"/\").pop();\n    const storageRef = ref(storage, path);\n    const url = await getDownloadURL(storageRef);\n\n    return {\n      id,\n      name,\n      url,\n    };\n  }\n\n  /**\n   *\n   * @returns {boolean} true if password is correct, false otherwise\n   */\n  // const uploadImageHandler = async () => {\n  //   if (imageUpload == null) {\n  //     return;\n  //   }\n\n  //   let currentImageRef = ref(\n  //     storage,\n  //     `sessions/${currentSession}/${imageUpload.name}`\n  //   );\n\n  //   setImageRef(currentImageRef);\n\n  //   uploadBytes(currentImageRef, imageUpload).then((snapshot) => {\n  //     setImageList((prev) => [...prev, snapshot.ref]);\n  //   });\n\n  //   await refreshFiles();\n  // };\n\n  /**\n   *\n   * @returns {boolean} true if password is correct, false otherwise\n   */\n  const uploadImageHandler = async () => {\n    if (imageUpload == null) {\n      return;\n    }\n\n    let currentImageRef = ref(\n      storage,\n      `sessions/${currentSession}/${imageUpload.name}`\n    );\n\n    setImageRef(currentImageRef);\n\n    const snapshot = await uploadBytes(currentImageRef, imageUpload);\n\n    // Get the file information for the uploaded image\n    const uploadedFileInfo = await getObjectInfo(snapshot.ref);\n\n    // Update the files state with the uploaded file information\n    setFiles((prev) => [...prev, uploadedFileInfo]);\n\n    await refreshFiles();\n  };\n\n  /**\n   *\n   * @param {*} url\n   */\n  const downloadImageHandler = (url, name) => {\n    const xhr = new XMLHttpRequest();\n    xhr.responseType = \"blob\";\n    xhr.onload = (event) => {\n      const blob = xhr.response;\n      const a = document.createElement(\"a\");\n      const urlObject = window.URL.createObjectURL(blob);\n      a.href = urlObject;\n      a.download = name; // the file name\n      a.style.display = \"none\";\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(urlObject);\n      document.body.removeChild(a);\n    };\n    xhr.open(\"GET\", url);\n    xhr.send();\n  };\n\n  /**\n   *  Gets the list of images from the database and sets the imageList state\n   *\n   */\n  const deleteImageHandler = async () => {\n    try {\n      const response = await listAll(imageListRef);\n      const deletePromises = response.items.map((item) => deleteObject(item));\n      await Promise.all(deletePromises);\n    } catch (error) {\n      console.error(\"Error deleting images:\", error);\n    }\n\n    setFiles([]);\n    await refreshFiles();\n  };\n\n  const deleteSingleHandler = async (url) => {\n    try {\n      const response = await listAll(imageListRef);\n\n      const itemPromises = response.items.map(async (item) => {\n        const itemUrl = await getDownloadURL(item);\n\n        if (itemUrl === url) {\n          try {\n            await deleteObject(item);\n            setImageList((prev) => [...prev.filter((i) => i !== itemUrl)]);\n          } catch (error) {}\n        }\n      });\n\n      // Wait for all itemPromises to complete before resolving\n      await Promise.all(itemPromises);\n    } catch (error) {}\n  };\n\n  /*\n   * Checks the password against the files in database\n   *\n   */\n  const passwordHandler = async (pin) => {\n    let check = await checkPasswordRepo(pin);\n\n    if (check) {\n      setCurrentSession(pin);\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const checkPasswordRepo = async (password) => {\n    let out = false;\n\n    let responses = await listAll(sessionListRef)\n      .then((response) => response)\n      .catch((error) => {\n        return false;\n      });\n\n    responses.prefixes.forEach((prefix) => {\n      if (prefix._location.path.split(\"/\")[1] === password) {\n        out = true;\n      }\n    });\n    return out;\n  };\n\n  const generateSessionHandler = async () => {\n    let randSession = Math.floor(Math.random() * 90000 + 10000);\n    let check = await checkPasswordRepo(randSession);\n\n    while (check) {\n      randSession = Math.floor(Math.random() * 90000 + 10000);\n      check = await checkPasswordRepo(randSession);\n    }\n\n    setCurrentSession(randSession);\n  };\n\n  const fetchUrls = async (item) => {\n    const url = await getDownloadURL(item);\n    setImageUrls((prev) => [...prev, url]);\n  };\n\n  ////////////////////////////\n  // APP SWITCHER\n  ////////////////////////////\n  const [activeIndex, setActiveIndex] = useState(0);\n\n  // Use the useEffect hook to apply the CSS classes based on the condition\n  useEffect(() => {\n    if (activeIndex === 0) {\n      document.body.className = \"panel-landing\";\n    } else {\n      document.body.className = \"bodyClass2\";\n    }\n\n    // Cleanup function to remove the classes when the component is unmounted\n    return () => {\n      document.body.className = \"\";\n    };\n  }, [activeIndex]);\n\n  return (\n    <>\n      <Panel isActive={activeIndex === 0}>\n        <div>\n          <Landing\n            onAction={() => setActiveIndex(1)}\n            generateSessionHandler={generateSessionHandler}\n            passwordHandler={passwordHandler}\n            refreshFiles={refreshFiles}\n          />\n        </div>\n      </Panel>\n\n      <Panel isActive={activeIndex === 1}>\n        <div className=\"panel1\">\n          <UploadDownload\n            onAction={() => setActiveIndex(0)}\n            currentSession={currentSession}\n            setImageHolder={setImageHolder}\n            uploadImageHandler={uploadImageHandler}\n            deleteImageHandler={deleteImageHandler}\n            setImageList={setImageList}\n            setImageUrls={setImageUrls}\n            imageListRef={imageListRef}\n            fetchUrls={fetchUrls}\n            imageList={imageList}\n            downloadImageHandler={downloadImageHandler}\n            deleteSingleHandler={deleteSingleHandler}\n            refresh={refresh}\n            refreshFiles={refreshFiles}\n            setFiles={setFiles}\n            getObjectInfo={getObjectInfo}\n            files={files}\n          />\n        </div>\n      </Panel>\n    </>\n  );\n\n  ////////////////////////////\n  // END APP SWITCHER\n  ////////////////////////////\n}\n\nfunction Panel({ children, isActive }) {\n  return (\n    <section className=\"panel\">{isActive ? <p>{children}</p> : null}</section>\n  );\n}\n\nexport function Landing({\n  onAction,\n  generateSessionHandler,\n  passwordHandler,\n  refreshFiles,\n}) {\n  const [AuthPin, setAuthPin] = useState(\"\");\n\n  const handleAuth = (v) => {\n    if (v.length <= 5) {\n      setAuthPin(v);\n    }\n  };\n\n  function generateCode() {\n    onAction();\n    generateSessionHandler();\n  }\n\n  async function handleSubmitCode() {\n    if (await passwordHandler(AuthPin)) {\n      await refreshFiles();\n      onAction();\n    } else {\n      alert(\"Incorrect Pin\");\n    }\n  }\n\n  return (\n    <div class=\"center\">\n      <h1 className=\"font-link\">Firefly</h1>\n      <br></br>\n      <div className=\"button-23\">\n        <div>\n          {\n            <button className=\"button-24\" onClick={generateCode}>\n              New Session\n            </button>\n          }\n        </div>\n\n        <br></br>\n        <br></br>\n        <p>input pin:</p>\n        <input\n          value={AuthPin}\n          onChange={(e) => handleAuth(e.target.value)}\n          className=\"space\"\n          type=\"number\"\n          id=\"pin\"\n          pattern=\"\\d*\"\n          inputMode=\"numeric\"\n        />\n        <br></br>\n        <br></br>\n        <button\n          onClick={handleSubmitCode}\n          className={`button-25${AuthPin.length !== 5 ? \" disabled\" : \"\"}`}\n          disabled={AuthPin.length !== 5}\n        >\n          Submit\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport function UploadDownload({\n  onAction,\n  currentSession,\n  setImageHolder,\n  uploadImageHandler,\n  deleteImageHandler,\n  setImageList,\n  setImageUrls,\n  imageListRef,\n  fetchUrls,\n  imageList,\n  downloadImageHandler,\n  deleteSingleHandler,\n  refresh,\n  refreshFiles,\n  getObjectInfo,\n  setFiles,\n  files,\n}) {\n  function triggerFileInputClick() {\n    document.getElementById(\"hiddenFileInput\").click();\n  }\n\n  return (\n    <div>\n      <Table\n        setImageList={setImageList}\n        setImageUrls={setImageUrls}\n        imageListRef={imageListRef}\n        fetchUrls={fetchUrls}\n        currentSession={currentSession}\n        imageList={imageList}\n        deleteSingleHandler={deleteSingleHandler}\n        downloadImageHandler={downloadImageHandler}\n        refresh={refresh}\n        refreshFiles={refreshFiles}\n        getObjectInfo={getObjectInfo}\n        setFiles={setFiles}\n        files={files}\n      />\n      <div className=\"sidebar\">\n        <h1 className=\"font-link-2\">Firefly</h1>\n        <div className=\"showcode\">\n          <p>code:</p>\n          <h1>{currentSession}</h1>\n        </div>\n        <br></br>\n        <br></br>\n        <br></br>\n\n        {\n          <form className=\"buttons-list\">\n            <input\n              type=\"file\"\n              id=\"hiddenFileInput\"\n              style={{ display: \"none\" }}\n              onChange={(event) => setImageHolder(event.target.files[0])}\n            />\n            <button\n              type=\"button\"\n              onClick={triggerFileInputClick}\n              className=\"button-25\"\n            >\n              Upload File\n            </button>\n            <button\n              type=\"button\"\n              className=\"button-25\"\n              onClick={uploadImageHandler}\n            >\n              Send File\n            </button>\n\n            <br></br>\n            <br></br>\n            <button\n              type=\"button\"\n              className=\"button-26\"\n              onClick={deleteImageHandler}\n            >\n              Delete All\n            </button>\n            <br></br>\n            <button type=\"button\" className=\"button-26\" onClick={refreshFiles}>\n              Refresh\n            </button>\n          </form>\n        }\n        <br></br>\n        <div className=\"showcode-2\">\n          <p>time left</p>\n          <Timer deleteImageHandler={deleteImageHandler} onAction={onAction} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function Table({\n  setImageList,\n  imageListRef,\n  currentSession,\n  deleteSingleHandler,\n  downloadImageHandler,\n  refresh,\n  refreshFiles,\n  getObjectInfo,\n  setFiles,\n  files,\n}) {\n  const downloadFile = (url, name) => {\n    downloadImageHandler(url, name);\n  };\n\n  const deleteFile = async (url) => {\n    await deleteSingleHandler(url);\n    refreshFiles();\n  };\n\n  //   async function fileList(item) {\n  //     // let objectList = await Promise.all(imageList.map((item) => getObjectInfo(item)));\n  //     let obj = await getObjectInfo(item);\n  //     // objectList = objectList.slice(0, objectList.length / 2);\n  //     setFiles(prev => [...prev, obj]);\n  // }\n\n  const fetchFiles = async () => {\n    try {\n      const response = await listAll(imageListRef);\n      const filePromises = response.items.map(async (item) => {\n        const fileInfo = await getObjectInfo(item);\n        return fileInfo;\n      });\n\n      const fetchedFiles = await Promise.all(filePromises);\n      setFiles(fetchedFiles);\n    } catch (error) {\n      console.log(\"Error fetching files:\", error);\n    }\n  };\n\n  useEffect(() => {\n    setFiles([]);\n    fetchFiles();\n    // eslint-disable-next-line\n  }, [currentSession, refresh]);\n\n  return (\n    <div className=\"App\">\n      <table>\n        <thead>\n          <tr>\n            <th>File Name</th>\n            <th>Download</th>\n            <th>Delete</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {files.map((file) => (\n            <tr key={file.id}>\n              <td>{file.name}</td>\n              <td>\n                <button\n                  className=\"button-25\"\n                  onClick={() => downloadFile(file.url, file.name)}\n                >\n                  Download\n                </button>\n              </td>\n              <td>\n                <button\n                  className=\"button-25\"\n                  onClick={() => deleteFile(file.url)}\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport function Timer({ deleteImageHandler, onAction }) {\n  // We need ref in this, because we are dealing\n  // with JS setInterval to keep track of it and\n  // stop it when needed\n  // im just testing my git here so ignore this line\n  const Ref = useRef(null);\n\n  // The state for our timer\n  const [timer, setTimer] = useState(\"00:00:00\");\n\n  const getTimeRemaining = (e) => {\n    const total = Date.parse(e) - Date.parse(new Date());\n    const seconds = Math.floor((total / 1000) % 60);\n    const minutes = Math.floor((total / 1000 / 60) % 60);\n    const hours = Math.floor((total / 1000 / 60 / 60) % 24);\n    return {\n      total,\n      hours,\n      minutes,\n      seconds,\n    };\n  };\n\n  const startTimer = (e) => {\n    let { total, hours, minutes, seconds } = getTimeRemaining(e);\n    if (total >= 0) {\n      // update the timer\n      // check if less than 10 then we need to\n      // add '0' at the beginning of the variable\n      setTimer(\n        (hours > 9 ? hours : \"0\" + hours) +\n          \":\" +\n          (minutes > 9 ? minutes : \"0\" + minutes) +\n          \":\" +\n          (seconds > 9 ? seconds : \"0\" + seconds)\n      );\n    } else {\n      // When the timer reaches zero, call the deleteImageHandler\n      deleteImageHandler();\n      onAction();\n      alert(\"Time's up!\");\n\n      // Clear the interval to stop the timer\n      if (Ref.current) clearInterval(Ref.current);\n    }\n  };\n\n  const clearTimer = (e) => {\n    // If you adjust it you should also need to\n    // adjust the Endtime formula we are about\n    // to code next\n    // ADJUST TO CHANGE THE AMOUNT OF TIME\n    setTimer(\"00:15:00\");\n\n    // If you try to remove this line the\n    // updating of timer Variable will be\n    // after 1000ms or 1sec\n    if (Ref.current) clearInterval(Ref.current);\n    const id = setInterval(() => {\n      startTimer(e);\n    }, 1000);\n    Ref.current = id;\n  };\n\n  const getDeadTime = () => {\n    let deadline = new Date();\n\n    // ADJUST THE NUMBER OF SECONDS IN THE TIMER HERE (currently 900)\n    deadline.setSeconds(deadline.getSeconds() + 900);\n    return deadline;\n  };\n\n  // We can use useEffect so that when the component\n  // mount the timer will start as soon as possible\n\n  // We put empty array to act as componentDid\n  // mount only\n  useEffect(() => {\n    clearTimer(getDeadTime());\n\n    // eslint-disable-next-line\n  }, []);\n\n  // Another way to call the clearTimer() to start\n  // the countdown is via action event from the\n  // button first we create function to be called\n  // by the button\n\n  return (\n    <div>\n      <h1>{timer}</h1>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}